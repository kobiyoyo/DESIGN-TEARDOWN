(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{10:function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},11:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},12:function(t,e,n){var c=n(60),a=n(67);t.exports=function(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?a(t):e}},13:function(t,e,n){var c=n(212);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}},14:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}t.exports=function(t,e,c){return e&&n(t.prototype,e),c&&n(t,c),t}},212:function(t,e){function n(e,c){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,c)}t.exports=n},257:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return _});var c=n(11),a=n.n(c),o=n(14),r=n.n(o),s=n(12),i=n.n(s),u=n(10),l=n.n(u),b=n(67),p=n.n(b),m=n(13),d=n.n(m),f=n(5),h=n.n(f),O=n(99),j=n(2),g=n.n(j),y=n(573),v=n(35),N=n(36),k=function(){var t=!0;return N.a.NO_MINI_CART_ROUTES.forEach(function(e){document.location.pathname.match(e)&&(t=!1)}),t},w="cart-active",_=function(t){function e(t){var n;return a()(this,e),n=i()(this,l()(e).call(this,t)),h()(p()(n),"handleToggle",function(t){t.preventDefault(),t.stopPropagation(),n.setState(function(t){return{open:!t.open,wasUserInteraction:!0}})}),h()(p()(n),"handleCartClick",function(t){t.stopPropagation()}),h()(p()(n),"handleEmpty",function(t){var e=n.props.store;n.handleToggle(t),t.preventDefault(),setTimeout(function(){return e.dispatch(y.i)},400)}),n.timeout=null,n.state=Object.assign({cart:null,open:!0,shippingAddress:{}},t.store.getState()),n}return d()(e,t),r()(e,[{key:"componentDidMount",value:function(){var t=this.props.store;t.subscribe(this.onStoreChange.bind(this)),t.dispatch(y.k)}},{key:"componentDidUpdate",value:function(){var t=this.state.cart;if(!g()(t,"items"))return!1;Object.keys(t.items).length&&k()?document.body.classList.add(w):document.body.classList.remove(w)}},{key:"onStoreChange",value:function(){var t=this,e=this.props.store.getState(),n=e.cart,c=this.state,a=c.cart,o=c.shippingAddress,r=c.open,s=!!Object.keys(n.items).length&&r,i=g()(e,"order.details.shippingAddress")||g()(e,"auth.user.user_metadata.shippingAddress")||o,u=a&&a.loaded&&0===Object.keys(a.items).length&&n.loaded&&0<Object.keys(n.items).length;u&&setTimeout(function(){t.setState({open:!0,wasUserInteraction:!1},function(){t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(function(){var e=t.state,n=e.open,c=e.wasUserInteraction;n&&!c&&t.setState({open:!1})},5e3)})},0),this.setState({cart:n,open:s,shippingAddress:i,wasEmptyBefore:u})}},{key:"handleQTY",value:function(t,e){var n=this.props.store;return function(c){c.preventDefault(),n.dispatch(Object(y.L)(t.sku,e))}}},{key:"render",value:function(){var t=this,e=this.state,n=e.cart,c=e.open,a=e.shippingAddress,o=e.wasEmptyBefore,r=Object.keys(n.items),s=!r.length,i={"cart-container":!0,"cart-open":c&&!s,empty:s},u=Object(v.t)(a.country,n),l=0;return Object.keys(n.items).forEach(function(t){l+=n.items[t].quantity}),s||!k()?null:Object(O.b)("div",{className:Object.keys(i).filter(function(t){return i[t]}).join(" "),onClick:this.handleToggle},Object(O.b)("a",{onClick:this.handleToggle,className:"cart-trigger cart-reminder-animation".concat(o?"-init":"")},Object(O.b)("ul",{className:"count"},Object(O.b)("li",null,l),Object(O.b)("li",null,l))),Object(O.b)("div",{className:"cart cart-reminder-animation".concat(o?"-init":""),onClick:this.handleCartClick},Object(O.b)("div",{className:"wrapper"},Object(O.b)("header",null,Object(O.b)("h2",null,"Shopping Cart"),Object(O.b)("a",{className:"clear-the-cart",href:"#",onClick:this.handleEmpty},"Clear the cart")),Object(O.b)("div",{className:"body"},Object(O.b)("ul",null,r.map(function(e){var c=n.items[e];return Object(O.b)("li",{className:"product"},Object(O.b)("div",{className:"product-image"},Object(O.b)("a",{href:c.path},Object(O.b)("img",{src:c.image,alt:c.title}))),Object(O.b)("div",{className:"product-details"},Object(O.b)("h3",{className:"product-title"},Object(O.b)("a",{href:c.path},c.title)),Object(O.b)("p",{className:"product-description"},c.type,c.addons&&" + ".concat(c.addons.map(function(t){return t.title}).join(", "))),Object(O.b)("div",{className:"product-controls"},Object(O.b)("div",{className:"product-amount"},Object(O.b)("span",{className:"product-count grey lining-figures-tnum"},c.quantity)," ",Object(O.b)("span",{className:"grey"},"×")," ","USD"===c.price.currency&&Object(O.b)("span",{className:"product-currency"},"$"),Object(O.b)("span",{className:"product-price lining-figures-tnum"},c.addonPrice?"(".concat(c.price.amount," + ").concat(c.addonPrice.amount,")"):c.price.amount),"EUR"===c.price.currency&&Object(O.b)("span",{className:"product-currency"},"€")),Object(v.b)(c.type)?Object(O.b)("label",{htmlFor:"count-".concat(e),className:"form__field product-counter"},Object(O.b)("div",{className:"increment-decrement-input-wrapper"},Object(O.b)("input",{className:"form__field__input",type:"number",name:"count",id:"count-".concat(e),value:c.quantity,min:"1",onChange:function(e){return t.handleQTY(c,parseInt(e.target.value,10))(e)}}),Object(O.b)("button",{type:"button",className:"increment-button count-button","aria-controls":"count-2",onClick:t.handleQTY(c,c.quantity+1)},"+"),Object(O.b)("button",{type:"button",className:"decrement-button count-button","aria-controls":"count-2",onClick:t.handleQTY(c,c.quantity-1)},"-"))):Object(O.b)("a",{href:"#",onClick:t.handleQTY(c,0),className:"form__field product-counter"},"Remove"))))}),g()(n,"memberDiscount.cents")?Object(O.b)("li",{className:"product checkout__coupon"},Object(O.b)("div",{className:"product-image"},Object(O.b)("img",{src:"/images/smashing-cat/cat-just-friendly.svg",alt:"Friendly Cat"})),Object(O.b)("div",{className:"product-details"},Object(O.b)("h3",{className:"product-title"},"Membership Discount"," ",Object(O.b)("span",{role:"img","aria-label":"Lion",className:"membership-emoji"},"🦁")),Object(O.b)("p",{className:"product-description"},Object(O.b)("em",null,"Thanks for being smashing.")),Object(O.b)("div",{className:"product-controls"},Object(O.b)("div",{className:"product-amount"},Object(O.b)("span",{className:"product-count lining-figures-tnum coupon-sum"},"-",Object(v.i)(n.memberDiscount))," ")))):null)),Object(O.b)("footer",null,Object(O.b)("a",{href:"/checkout",className:"checkout"},Object(O.b)("span",null,"Checkout (",Object(v.i)(n.total),") →"),Object(O.b)("small",null,Object(O.b)("span",null,"Final prices, no surprises.")," ",Object(v.B)(n)&&Object(O.b)("span",null,"You","'","ll get the book before ",Object(v.k)(u[1]),"."," "),Object(v.x)(n,"E-Book")&&Object(O.b)("span",null,"Amazon Kindle, ePUB, PDF."),Object(v.x)(n,"Ticket")&&Object(O.b)("span",null,"What you see is what you pay.")))))))}}]),e}(O.a)},67:function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}}}]);